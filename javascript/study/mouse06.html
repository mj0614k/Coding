<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>자바스크립트 : 검색 효과</title>

        <link rel="stylesheet" href="../assets/css/style.css" />
        <link rel="stylesheet" href="../assets/css/dracula.css" />
    </head>

    <body>
        <header id="header">
            <h1><a href="../index.html">Javascript</a></h1>
        </header>
        <!-- //header -->

        <main id="main">
            <div class="document">
                <h2 class="t_tit">자바스크립트 : 마우스 효과 : 텍스트 효과</h2>
                <p class="t_desc">
                    자바스크립트의 다양한 효과들 중, 마우스 효과입니다. 이번에는 이미지 위에
                    기울어진 형태의 텍스트를 만들고, 마우스를 움직일 때마다 텍스트가 움직이도록
                    텍스트 효과를 작업해 보도록 하겠습니다.
                </p>
                <hr />
                <h2 class="t_tit2">1. HTML 소스</h2>
                <h3 class="t_tit3">1-1) 텍스트 상자 만들기</h3>
                <div class="t_code">
                    <pre><code class="language-html">&lt;div class="mouse__text"&gt;
    &lt;div class="line"&gt;
        &lt;div class="left"&gt;
            &lt;div class="spanWrap"&gt;
                &lt;span class="spanSlow"&gt;Pain Fast&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="right"&gt;
            &lt;div class="spanWrap"&gt;
                &lt;span class="spanSlow"&gt;Pain Fast&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="line"&gt;
        &lt;div class="left"&gt;
            &lt;div class="spanWrap"&gt;
                &lt;span class="spanFast"&gt;is pleasure.&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="right"&gt;
            &lt;div class="spanWrap"&gt;
                &lt;span class="spanFast"&gt;is pleasure.&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="line"&gt;
        &lt;div class="left"&gt;
            &lt;div class="spanWrap"&gt;
                &lt;span class="spanSlow"&gt;지나간 고통은&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="right"&gt;
            &lt;div class="spanWrap"&gt;
                &lt;span class="spanSlow"&gt;지나간 고통은&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="line"&gt;
        &lt;div class="left"&gt;
            &lt;div class="spanWrap"&gt;
                &lt;span class="spanFast"&gt;쾌락이다.&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="right"&gt;
            &lt;div class="spanWrap"&gt;
                &lt;span class="spanFast"&gt;쾌락이다.&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
                </div>
                <p class="t_box">
                    오늘은 HTML의 구조도 중요하기 때문에 함께 살펴보겠습니다. 텍스트 상자는 하나처럼
                    보이지만, 사실은 다른 각도로 기울어진 두 개의 상자가 있고, 두 상자가 만나는 지점
                    이후로는 overflow: hidden 속성을 사용하여 숨겨준 것입니다.
                    <br />총 네 줄의 텍스트를 작성할 것이기 때문에 line 박스를 네 개 만들어 줍니다.
                    그 안에는 각각 left, right 박스를 만들어 줍니다. 그 안에 span으로 텍스트가
                    들어가 있는 구조입니다.
                </p>
                <h2 class="t_tit2">2. CSS 소스</h2>
                <h3 class="t_tit3">2-1) text box</h3>
                <div class="t_code">
                    <pre><code class="language-css">.mouse__text .line {
    width: 100%;
    display: flex;
}
.mouse__text .line .left {
    width: 50vw;
    color: orange;
    overflow: hidden;
    transform: skew(0deg, -15deg);
}
.mouse__text .line .left .spanWrap {
    width: 100vw;
    text-align: center;
}
.mouse__text .line .right {
    width: 50vw;
    overflow: hidden;
    transform: skew(0deg, 15deg);
}
.mouse__text .line .right .spanWrap {
    width: 100vw;
    text-align: center;
    transform: translateX(-50vw);
}
.mouse__text span {
    display: inline-block;
}
</code></pre>
                </div>
                <p class="t_box">
                    텍스트 상자들을 만들었다면 CSS 속성을 적용해 줍니다.<br />
                    transform: skew 속성은 요소의 경사를 변형시킬 때 사용합니다. left, right 박스에
                    각각 적용시켜 줍니다.
                </p>
                <h2 class="t_tit2">2. JAVASCRIPT 소스</h2>
                <h3 class="t_tit3">2-1) mouseMove 이벤트 만들어 주기</h3>
                <div class="t_code">
                    <pre><code class="language-js">const mouseMove = (e) => {};
window.addEventListener("mousemove", mouseMove);
</code></pre>
                </div>
                <p class="t_box">
                    addEventListener로 마우스가 움직일 때의 이벤트를 먼저 만들어 줍니다. 아래에서
                    작업할 모든 소스들은, 모두 해당 이벤트 안에서 이루어질 것입니다.
                </p>
                <h3 class="t_tit3">2-2) 마우스 커서의 좌표값 구하기</h3>
                <div class="t_code">
                    <pre><code class="language-js">// 마우스 좌표값(브라우저 기준)
let mousePageX = e.pageX;
let mousePageY = e.pageY;

// 커서 움직이기
gsap.to(".mouse__cursor", {
    duration: 0.3,
    left: mousePageX - 50,
    top: mousePageY - 50,
});
</code></pre>
                </div>
                <p class="t_box">
                    pageX, pageY를 이용하여 브라우저 기준 마우스 좌표값을 구해줍니다.
                    <br />그 다음, gsap를 사용하여 부드럽게 커서를 움직여 줍니다. 50을 빼주는 이유는
                    마우스 커서의 너비, 높이가 100px이기 때문입니다. 실제 커서의 위치를 가운데로
                    작업해주기 위함입니다.
                </p>
                <div class="t_code">
                    <pre><code class="language-js">// 마우스 좌표값(중앙 기준)
let centerPageX = window.innerWidth / 2 - mousePageX;
let centerPageY = window.innerHeight / 2 - mousePageY;
</code></pre>
                </div>
                <p class="t_box">
                    브라우저의 중앙 기준 마우스 위치값도 구해줍니다. 2-2에서 구한 좌표값과는 별개로,
                    이미지가 움직일 때 사용되는 값입니다.<br />
                    이 값을 바로 적용할 수도 있지만, 아직은 값이 커서 이미지가 과하게 움직일
                    것입니다. 그러므로 값을 줄여주고, 최대ㆍ최소값을 지정하는 작업이 필요합니다.
                </p>
                <h3 class="t_tit3">2-3) 세부 작업하기</h3>
                <div class="t_code">
                    <pre><code class="language-js">// 최소값은 -100, 최대값은 100 설정
let maxPageX = Math.max(-100, Math.min(100, centerPageX));
let maxPageY = Math.max(-100, Math.min(100, centerPageY));
</code></pre>
                </div>
                <p class="t_box">
                    Math.max 함수는 입력값으로 받은 숫자 중 가장 큰 숫자를 반환합니다. 반대로
                    Math.min 함수는 가장 작은 숫자를 반환합니다.<br />
                    즉, Math.min(100, centerPageX)에서, centerPageX가 100보다 커지면 함수는 100의
                    값을 반환할 것입니다. 이후, Math.max(-100, 100)에서, 100을 반환하게 되므로,
                    최대값은 자연스럽게 100으로 설정됩니다.<br />
                    한편, Math.min(100, centerPageX)에서, centerPageX가 100보다 작으면 함수는
                    centerPageX의 값을 반환할 것입니다. 이후, Math.max(-100, centerPageX)에서,
                    centerPageX의 값을 반환하게 되고, 값이 더 작아지면 -100의 값을 반환할 것입니다.
                    자연스럽게 최소값은 -100으로 설정됩니다.
                </p>
                <div class="t_code">
                    <pre><code class="language-js">// 각도 줄이기
let anglePageX = maxPageX * 0.1;
let anglePageY = maxPageY * 0.1;
    
// 부드러운 설정
let softPageX = 0,
    softPageY = 0;
softPageX += (anglePageX - softPageX) * 0.4;
softPageY += (anglePageY - softPageY) * 0.4;
</code></pre>
                </div>
                <p class="t_box">
                    maxPageX, maxPageY를 구했지만, 아직도 움직임이 클 것입니다. 따라서 0.1씩
                    곱해주었습니다.<br />
                    또, 움직임을 더 부드럽게 작업해 주기 위해 softPage 변수를 만들어 주었습니다.
                    anglePage와 softPage의 값은 0으로 같지만, 오차는 발생합니다.
                </p>
                <h3 class="t_tit3">2-4) 이미지 움직이기</h3>
                <div class="t_code">
                    <pre><code class="language-js">const imgMove = document.querySelector(".mouse__img");
imgMove.style.transform = "perspective(600px) rotateX(" + softPageX + "deg) rotateY(" + softPageY + "deg)";
</code></pre>
                </div>
                <p class="t_box">이제 이미지에 움직임 효과를 주면 모든 작업이 끝납니다.</p>
                <hr />
                <h2 class="t_tit2">결과</h2>
                <div class="t_iframe" style="min-height: 800px; padding-top: 0px">
                    <iframe
                        src="https://mj0614k.github.io/Coding/javascript/effect/mouseEffect05.html"
                    ></iframe>
                </div>

                <div class="t_link">
                    <a
                        href="https://github.com/mj0614k/Coding/blob/main/javascript/effect/mouseEffect05.html"
                        >원본 소스 보기</a
                    >
                    <a href="https://mj0614k.github.io/Coding/javascript/effect/mouseEffect05"
                        >원본 사이트 보기</a
                    >
                </div>
            </div>
        </main>
        <!-- //main -->

        <footer id="footer">
            <a href="mailto:mo0647@naver.com">mo0647@naver.com</a>
        </footer>
        <!-- //footer -->

        <script src="../assets/js/highlight.min.js"></script>
        <script>
            hljs.highlightAll();
        </script>
    </body>
</html>
