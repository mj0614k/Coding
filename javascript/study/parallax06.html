<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>자바스크립트 : 검색 효과</title>

        <link rel="stylesheet" href="../assets/css/style.css" />
        <link rel="stylesheet" href="../assets/css/dracula.css" />
    </head>

    <body>
        <header id="header">
            <h1><a href="../index.html">Javascript</a></h1>
        </header>
        <!-- //header -->

        <main id="main">
            <div class="document">
                <h2 class="t_tit">자바스크립트 : 패럴랙스 효과 : 텍스트 효과</h2>
                <p class="t_desc">
                    자바스크립트의 다양한 효과들 중, 패럴랙스 효과입니다. 이번에는 스크롤을 내릴
                    때마다 해당하는 섹션의 텍스트가 한 글자씩 나타나도록 작업해 보겠습니다.
                </p>
                <hr />
                <h2 class="t_tit2">1. 글씨 쪼개기</h2>
                <div class="t_code">
                    <pre><code class="language-js">document.querySelectorAll(".split").forEach((text) => {
    let splitText = text.innerText;
    let splitWrap = splitText.split("").join("&lt;/span&gt;&lt;span aria-hidden='true'&gt;");
    splitWrap = "&lt;span aria-hidden='true'&gt;" + splitWrap + "&lt;/span&gt;";
    text.innerHTML = splitWrap;
    // 접근성 향상을 위해 p 태그에 label 속성 추가
    text.setAttribute("aria-label", splitText);
});
</code></pre>
                </div>
                <p class="t_box">
                    글자가 하나씩 나타나도록 하려면, 모든 글자가 한 글자씩 span 태그에 담겨 있어야
                    합니다. 9개의 섹션 속 글자를 모두 직접 HTML로 쪼갤 수는 없으니, 스크립트로
                    작업해 줍니다. <br />split은 각 섹션의 텍스트 박스입니다. 섹션마다 텍스트 박스는
                    존재하므로, 총 9개의 split이 존재할 것이기 때문에 querySelectorAll을 사용하여
                    선택해 줍니다. splitText 변수는 각각의 split에 적용한다는 의미입니다.
                </p>
                <h2 class="t_tit2">2. 현재 스크롤의 높이값 구하기</h2>
                <div class="t_code">
                    <pre><code class="language-js">
            
            function scroll() {
                let scrollTop = window.scrollY;
                document.querySelector("#parallax__info .scroll").innerText = Math.round(scrollTop);

                // CSS 노가다 작업 경우
                // 바로 아랫줄에서 선택자를 split으로 하면 모든 텍스트가 동시에 나타남.
                // 부모 박스를 선택한 뒤, 부모 박스 내의 split을 선택해주어야 함.
                // document.querySelectorAll(".content__item").forEach((item) => {
                //     if (scrollTop >= item.offsetTop - 500) {
                //         item.querySelector(".split").classList.add("show");
                //     }
                // });

                document.querySelectorAll(".content__item").forEach((item) => {
                    if (scrollTop >= item.offsetTop - 300) {
                        item.querySelector(".split").classList.add("show");
                        item.querySelectorAll(".split span").forEach((span, index) => {
                            span.style.transitionDelay = 100 + 50 * index + "ms";
                            // for (i = 0; i &lt; span.length; i++) {
                            //     span.style.cssText = "transition-delay: all 0." + i + "s ease";
                            //     console.log(i);
                            // }
                        });
                    }
                });

                requestAnimationFrame(scroll);

                // 첫번째 span --> 0.01
                // 두번째 span --> 0.02 ...
            }
            scroll();
</code></pre>
                </div>
                <p class="t_box"></p>
                <h2 class="t_tit2">3. 스크롤값에 따라 각 콘텐츠들이 나타나도록 작업하기</h2>
                <div class="t_code">
                    <pre><code class="language-js">
</code></pre>
                </div>
                <p class="t_box"></p>
                <h2 class="t_tit2"></h2>
                <div class="t_code">
                    <pre><code class="language-js">
</code></pre>
                </div>
                <p class="t_box"></p>
                <hr />
                <h2 class="t_tit2">결과</h2>
                <div class="t_iframe" style="min-height: 1000px; padding-top: 0px">
                    <iframe
                        src="https://mj0614k.github.io/Coding/javascript/effect/parallaxEffect06.html"
                    ></iframe>
                </div>

                <div class="t_link">
                    <a
                        href="https://github.com/mj0614k/Coding/blob/main/javascript/effect/parallaxEffect06.html"
                        >원본 소스 보기</a
                    >
                    <a href="https://mj0614k.github.io/Coding/javascript/effect/parallaxEffect06"
                        >원본 사이트 보기</a
                    >
                </div>
            </div>
        </main>
        <!-- //main -->

        <footer id="footer">
            <a href="mailto:mo0647@naver.com">mo0647@naver.com</a>
        </footer>
        <!-- //footer -->

        <script src="../assets/js/highlight.min.js"></script>
        <script>
            hljs.highlightAll();
        </script>
    </body>
</html>
